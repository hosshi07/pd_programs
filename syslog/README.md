# syslogについて

今回使うロボット（spike）ではUSBにつないでいる場合，syslogというものを表示できる．  
これをうまく使えば閾値の値取得やデバックとしてうまく利用することができる．  
(特に今回のロボットはリソースが限られているためね．)  

---

新しいアプリを作った段階ではsyslogは表示されなかった．

## なぜ？

未検証：ヘッダーファイル（ｃ言語のファイル）にタスクポートの指定がないためではないか  
なのでヘッダーファイルにタスクポートの指定を行う.  

## 解決法

```c
#ifndef TASK_PORTID
#define	TASK_PORTID		1			/* 文字入力するシリアルポートID １もしくは２だって*/
#endif /* TASK_PORTID */
```

一番下の記述は正直いるかわからない．  
これを次のPDで試す．  

できたらいいな  

## 解説
このシリアルモニターに出力する際にはsyslogという関数を使う．  
これはt_syslog.hというヘッダーファイルによって読み込まれるが実際こいつはTASK_PORTの設定に従ってログを出力しようとしている．  
そのため指定がない場合，どこにログを出せばいいかわからず飛ばせないという原因があったのではないか．  
今回はポート１を指定することでtera termにログを出力できるようになっているが，ポート２も怪しい．  
まだ未検証のため何とも言えない．  
一応表を下に記載しておく．  
また，ヘッダーファイルではなくc言語のファイルの最初にマクロとして記載することも効果的である．  
ただし，マクロとして記載する際にはかならずt_syslog.hをインクルードする前に記述すること．  
こちらも未検証である．  




| ポートID | 出力先の種類      | 用途例                     |
| ----- | ----------- | ----------------------- |
| 1     | UART（外部端子）  | Tera Term（USB-Serial経由） |
| 2     | USB（デバッグ出力） | 開発PCとのUSB通信             |
| 3     | Bluetooth   | ワイヤレス通信                 |
| 4     | テスト用        | シミュレーション等               |
